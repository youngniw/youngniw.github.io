---
layout: post
title: "[AWS] EC2 인스턴스 생성 방법"
categories: AWS
tags: [AWS, EC2]
---

## 0. 들어가기에 앞서..

이번 포스트에서는 AWS에서 EC2 인스턴스를 생성하는 방법에 대해 설명하고자 합니다.

<br/>

백엔드를 구현할 때에는 일반적으로 애플리케이션을 개발하고 배포합니다.

이러한 애플리케이션의 배포를 위해 AWS의 EC2 인스턴스를 활용할 수 있습니다.

본 포스트에서는 AWS의 EC2 인스턴스를 생성하고자 합니다.

<br/>
<hr/>

## 1. Amazon EC2

Amazon Elastic Compute Cloud(Amazon EC2): 안전하고 크기 조정이 가능한 컴퓨팅 파워를 클라우드에서 제공하는 웹 서비스

> Amazon EC2를 사용함으로써 하드웨어에 선 투자할 필요가 없이 더 빠르게 애플리케이션을 개발하고 배포할 수 있다.
>
> 또한 원하는 수의 가상 서버를 구축하고 보안 및 네트워킹을 구성하며 스토리지를 관리할 수 있다.
>
> 즉, Amazon EC2를 사용하면 AWS 클라우드에서 실행되는 가상 머신 또는 인스턴스를 생성할 수 있다.


[ Amazon EC2가 제공하는 기능 ]

1. 인스턴스 
   - 가상 컴퓨팅 환경
   - 인스턴스를 위한 CPU, 메모리, 스토리지, 네트워킹 용량의 여러 가지 구성 제공
   - 키 페어를 사용하여 인스턴스 로그인 정보 보호 (AWS는 퍼블릭 키를 저장하고 사용자는 개인 키를 안전한 장소에 보관)
   - 보안 그룹을 사용해 인스턴스에 연결할 수 있는 프로토콜, 포트, 소스 IP 범위를 지정하는 방화벽 기능 제공
   - 사용자가 생성하여 Amazon EC2 리소스에 할당할 수 있는 메타데이터인 태그 활용 가능
2. Machine Image(AMI)
   - 서버에 필요한 운영체제와 소프트웨어들이 적절히 구성된 상태로 제공되는 템플릿으로, 이미지를 통해 인스턴스를 쉽게 만들 수 있음
3. Elastic Block Store(Amazon EBS)
   - Amazon EBS 볼륨을 사용하여 영구 스토리지 볼륨에 데이터 저장
4. 탄력적 IP 주소<sub>Elastic IP Addresses</sub>(EIP)
   - 동적 클라우드 컴퓨팅을 위한 고정 IPv4 주소
5. 가상 사설 클라우드<sub>Virtual Private Clouds</sub>(VPCs)
   - AWS 클라우드에서는 논리적으로 격리되어 있지만 원할 때마다 고객의 네트워크와 간편히 연결할 수 있는 가상 네트워크

<u>AWS 프리 티어</u>를 이용하시는 분들은 아래의 제공 사항을 참고하면 된다.

- Linux, RHEL 또는 SLES t2.micro 또는 t3.micro 인스턴스를 매월 750시간 무료 제공
- Windows t2.micro 또는 t3.micro 인스턴스를 매월 750시간 무료 제공

<br/>

### 1.1 인스턴스 생성

![1.1 인스턴스 생성 이미지](https://github.com/youngniw/youngniw.github.io/assets/78736070/5335e8b6-dab2-47b7-b743-6373fec6c2b1)

EC2 검색 후 대시보드에서 Region을 서울로 선택한 후, "인스턴스 시작" 버튼을 클릭합니다.

혹은 인스턴스 메뉴에서 인스턴스를 선택한 후, 오른쪽 상단의 "인스턴스 시작" 버튼을 클릭합니다.

<br/>

### 1.2 이름 및 태그

![1.2 이름 및 태그 이미지](https://github.com/youngniw/youngniw.github.io/assets/78736070/bc3ab416-84c5-407e-aa48-d1732aa2c1b8)

태그는 AWS 리소스에 할당하는 레이블이다. 

이때 "추가 태그 추가" 버튼을 통해 태그 추가가 가능하며, 각 태그는 사용자가 정의하는 키와 선택적 값으로 구성된다.

<br/>

### 1.3 AMI 선택

![1.3 AMI 선택 이미지](https://github.com/youngniw/youngniw.github.io/assets/78736070/fa3c627a-9df7-4379-9d0e-75e0f36bf4fe)

AMI는 EC2 인스턴스 시작에 필요한 정보를 제공하는 이미지이다.

원하는 인스턴스의 이미지를 선택할 수 있으며, 추가적으로 AMI 토글을 클릭하면 다양한 사양의 AMI를 고를 수 있다.

필자는 아마존 리눅스 AMI를 선택하였다.

> 이외에도 ubuntu를 많이 사용하며, 참고 자료가 많으니 이 점을 유의해서 선택하면 좋다.

<br/>

### 1.4 인스턴스 유형 선택

![1.4 인스턴스 유형 선택 이미지](https://github.com/youngniw/youngniw.github.io/assets/78736070/e1b64726-fae6-45d0-9838-86de6cc96d7b)

원하는 컴퓨팅, 메모리, 네트워킹 또는 스토리지 요건에 맞게 인스턴스를 사용하면 된다.

> 프리 티어 사용 시에는 "t2.micro"를 선택할 수 있다.

<br/>

### 1.5 키 페어 선택 및 생성

![1.5 키 페어 선택 및 생성 이미지](https://github.com/youngniw/youngniw.github.io/assets/78736070/bf28fd96-6a0d-4203-b1ac-5c0d43eabe68)

키 페어를 사용하여 인스턴스에 안전하게 연결할 수 있다.

> 키 페어: SSH 터미널로 인스턴스에 접근할 때 꼭 필요한 비밀 키
> 
> 만약 기존에 있는 키 페어를 사용할 시에는 인스턴스를 시작하기 전에 선택한 키 페어에 대한 액세스 권한이 있는지 확인해야 한다.

[ 키 페어 생성 방법 ]

![1.5 키 페어 선택 및 생성 이미지2](https://github.com/youngniw/youngniw.github.io/assets/78736070/f2b2de26-b852-4958-99c1-3eedeb978d12)

참고로, PuTTY를 통해 AWS EC2 인스턴스에 연결하고 싶다면 ppk 형식의 파일을 다운로드하거나 pem 파일을 ppk 파일로 변환하여 사용해야 한다.

[ 주의 사항 ]

- 키 페어 파일은 1회만 다운로드 할 수 있으며, 다운로드 받은 키 페어 파일은 재발급 되지 않음

<br/>

### 1.6 네트워크 설정

![1.6 연결 이미지](https://github.com/youngniw/youngniw.github.io/assets/78736070/a703658b-88fa-4e7c-b5e7-af553bb416b8)

보안 그룹은 인스턴스에 허용되는 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽이다.

추가적으로 보안 그룹 규칙을 추가하기 위해서는 오른쪽 상단의 "편집" 버튼을 활용하면 된다.

필자는 웹 서버로 활용되기에 HTTP(80)과 HTTPS(443)를 추가하였다.

> EC2 인스턴스는 SSH 포트가 기본 값 22로 설정되어 있다.

<br/>

### 1.7 스토리지 구성

![1.7 스토리지 구성 이미지](https://github.com/youngniw/youngniw.github.io/assets/78736070/52a80741-d240-452b-8530-c86157ea720f)

스토리지 용량과 EBS 볼륨 유형을 설정한다.

이때 프리 티어에서는 최대 스토리지가 30GB이기 때문에 이를 고려하여 스토리지 볼륨을 설정하면 된다.

> 추가적으로, 인스턴스 생성 이후에 스토리지 볼륨을 키울 수 있다.
> 
> 반면에 스토리지 볼륨을 줄이는 것을 불가능하다.

<br/>

### 1.8 인스턴스 시작 및 확인

![1.8 인스턴스 확인 이미지](https://github.com/youngniw/youngniw.github.io/assets/78736070/a8217b84-d0c9-4997-b0cf-877fe79df6b4)

위와 같이 인스턴스가 생성된 것을 확인할 수 있으며, 상태 검사가 초기화가 아닌 검사 통과 상태가 되면 인스턴스를 실행하고 있는 상태인 것이다.

<br/>
<hr/>

## 2. 보안 그룹 설정

EC2 인스턴스의 보안 그룹의 인바운드 규칙을 적절하게 설정하여 이후에 애플리케이션 실행 시에 접근이 가능하도록 하는 등을 수행할 수 있어야 한다.

### 2.1 인바운드 규칙 편집

![2.1 인바운드 규칙 편집 이미지](https://github.com/youngniw/youngniw.github.io/assets/78736070/653f42bb-53cd-4004-9bc1-46cceccf52e0)

생성된 EC2 인스턴스를 클릭하여 보안 탭의 보안 그룹에서 인바운드 규칙을 편집해야 한다.

> 인바운드 규칙: 외부에서 인스턴스로 접근 가능한 IP 설정
> 
> 아웃바운드 규칙: EC2 인스턴스가 접근할 수 있는 IP 설정

필자는 Spring 프레임워크를 활용한 애플리케이션을 실행할 것이기 때문에 포트 번호 `8080`을 입력하며, 모든 IP에서 접근이 가능하도록 설정하였다.

<br/>
<hr/>

[ 참고 사이트 ]

- https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/WindowsGuide/concepts.html

지금까지 AWS EC2 인스턴스를 생성하는 방법에 대해 설명하였습니다.

감사합니다:)
